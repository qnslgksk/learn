<!DOCTYPE html>
<html lang="ko">
<head>
	<title>swiper accessbility</title>
    <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Cache-Control" content="no-cache">
	<meta http-equiv="Pragma" content="no-cache">
	<meta name="keywords" content="swiper accessbility slider">
	<meta name="description" content="swiper 웹접근성맞추기">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"/>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
	<style>
	body{margin:0;}
	.a11y{
		position: absolute;
		width:1px; height:1px;
		clip-path: inset(-50%);
		border: 0;
	}
	a{text-decoration:none;}
	.mySwiper {
		overflow: hidden;
		position: relative;
		top:0; left:0;
		width: 100%;
		height: 800px;
	}
	.mySwiper::before,.mySwiper::after {
		content: '';
		position: absolute;
		top: 0; left: 0;
		width: 33.333333%;
		height: 100%;
		background:rgb(0, 0, 0);
		opacity: 0.5;
		z-index: 2;
	}
	.mySwiper::after{
		left: auto;
		right: 0;
	}
	.swiper-wrapper{
		position: relative;
		display: flex;
	}
	.swiper-slide img{
		height:100%;
	}
	.swiper-slide .txt-box{
		position:absolute;
		top: 50%;
		left: 50%;
		width: 100%;
		height: 100%;
		transform: translate(-50%);
		text-align: center;
		z-index:3;
	}
	.swiper-slide .txt-box h3{
		font-size: 40px;
		color:#fff;
	}
	.swiper-slide .txt-box a{
		padding: 15px 30px;
		border: 2px solid #fff;
		border-radius: 10vw;
		color:#fff;
		font-size:1vw;
	}
	.mySwiper > .swiper-pagination-bullets .swiper-pagination-bullet{
		margin:0 6px;
	}
	.swiper-pagination-bullet{
		width:50px;
		height:4px;
		border-radius:0;
	}
	.swiper-pagination-bullet-active{
		background:rgba(255,255,255,.5)
	}
	.swiper-button-prev,
	.swiper-container-rtl .swiper-button-next {
		left: 0;
	}
	.swiper-button-next,
	.swiper-container-rtl .swiper-button-prev {
		right: 0;
	}
	.swiper-button-prev:after, .swiper-rtl .swiper-button-next:after,
	.swiper-button-next:after, .swiper-rtl .swiper-button-prev:after{
		content:'';
	}
	.swiper-button-next,
	.swiper-button-prev {
		top: 0;
		margin-top: 0;
		width: 33.33%;
		height: 100%;
	}
	.swiper-button-next:focus,
	.swiper-button-prev:focus {padding:100px;}
	.swiper-controll-button{
		position:absolute; 
		top:0; left:50%; 
		width:18px; height:18px;
		border:1px solid rgba(255,255,255,.2);
		background:transparent;
		z-index:1;
	}
	.swiper-controll-button::before{
		position:absolute;
		top:50%;
		left:50%;
		transform:translate(-50%, -50%);
	}
	.swiper-button-pause::before{
		content:'pause';
		width:2px; height:10px;
		font-size:0;
		border-left:2px solid rgb(140, 0, 255);
		border-right:2px solid rgb(140, 0, 255);
	}
	
	.swiper-button-play::before{
		content:'play';
		border-top:4px solid transparent;
		border-bottom:4px solid transparent;
		border-left:6px solid rgb(140, 0, 255);
		font-size:0;
	}
	
	@media (max-width:768px){
		.swiper::before,.swiper::after {display:none;}
	}
	</style>
</head>

<body>
<a href="#">테스트링</a>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<h1 class="a11y">Swiper 웹접근성</h1>
<!-- 슬라이드 -->
<h2 class="a11y">슬라이드 배너</h2>
<!-- Slider main container -->
<!-- Slider main container -->
<div class="swiper mySwiper" tabindex="0">
	<div class="swiper-button-next"></div>
	<!-- Additional required wrapper -->
	<div class="swiper-wrapper">
		<!-- Slides -->
		<div class="swiper-slide" tabindex="0">
			<img src="https://cdn.pixabay.com/photo/2017/01/06/23/09/tree-1959267_960_720.jpg" alt="">
			<div class="txt-box">
				<h3>Slide 1</h3>
				<!-- <a href="javascript:;">바로가기</a> -->
			</div>
		</div>
		<div class="swiper-slide" tabindex="0">
			<img src="https://cdn.pixabay.com/photo/2017/01/06/19/15/soap-bubble-1958650_960_720.jpg" alt="">
			<div class="txt-box">
				<h3>Slide 2</h3>
				<!-- <a href="javascript:;">바로가기</a> -->
			</div>
		</div>
		<div class="swiper-slide" tabindex="0">
			<img src="https://cdn.pixabay.com/photo/2014/12/02/22/05/snowflakes-554635_960_720.jpg" alt="">
			<div class="txt-box">
				<h3>Slide 3</h3>
				<!-- <a href="javascript:;">바로가기</a> -->
			</div>
		</div>
		<div class="swiper-slide" tabindex="0">
			<img src="https://cdn.pixabay.com/photo/2018/10/19/12/14/train-3758523_960_720.jpg" alt="">
			<div class="txt-box">
				<h3>Slide 4</h3>
				<!-- <a href="javascript:;">바로가기</a> -->
			</div>
		</div>
		<div class="swiper-slide" tabindex="0">
			<img src="https://cdn.pixabay.com/photo/2015/11/27/08/50/snowflake-1065155_960_720.jpg" alt="">
			<div class="txt-box">
				<h3>Slide 5</h3>
				<!-- <a href="javascript:;">바로가기</a> -->
			</div>
		</div>
		<div class="swiper-slide" tabindex="0">
			<img src="https://cdn.pixabay.com/photo/2017/02/14/03/03/ama-dablam-2064522_960_720.jpg" alt="">
			<div class="txt-box">
				<h3>Slide 6</h3>
				<!-- <a href="javascript:;">바로가기</a> -->
			</div>
		</div>
	</div>
	
	<div class="swiper-button-prev"></div>

	<!-- Swiper paganations -->
	<div class="swiper-pagination"></div>
  	
	<!-- Swiper controll buttons -->
	<button class="swiper-button-play swiper-controll-button" style="display:none"></button>
	<button class="swiper-button-pause swiper-controll-button"></button>

</div>
<!--/ 슬라이드 -->
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<a href="#">상위</a>

<script>
// Swiper 알게 된 점
// 1. Swiper에 포커스가 들어오면 autolay 멈추기
// -- 자체작동 swiper-slide에 tabindex="0"를 주어 포커스가 들어오면 auto가 멈춘다 
	// ++ 컨트롤 아이콘 히든 또는 play버튼이 보이게 하기
	// 레이블을 토글하기 위해서 aria-pressed 값을 추가하기 보다는 button요소를 사용하자
// 2. Swiper에 포커스가 들어오면 loop제거
// -- swiper.removeSlide([0,1,2]) 기존만 삭제 clone은 안없어짐ㅠ  

$(function(){	
    $mySwiperPlay = $('.mySwiper .swiper-button-play'),
	$mySwiperPause = $('.mySwiper .swiper-button-pause'),
	$mySwiperControll = $('.mySwiper .swiper-controll-button');

if('.mySwiper'.length > 0){
	const mySwiper = new Swiper('.mySwiper', {
		pagination:{
			el: '.swiper-pagination',
			clickable: 'true',
		},
		slidesPerView: 1,
		loop: 'true',
		navigation:{
			nextEl: '.swiper-button-next',
			prevEl: '.swiper-button-prev'
		},
		a11y: {
			prevSlideMessage: '이전 슬라이드',
			nextSlideMessage: '다음 슬라이드',
			slideLabelMessage: '총 {{slidesLength}}장의 슬라이드 중 {{index}}번 슬라이드 입니다.',
		},
		autoplay: {  
			delay: 3000, 
			disabalOnInteraction: 'true',
		},
		watchOverflow: 'true',//슬라이드가 1개 일때 pager, button 숨김
		breakpoints: {
			768:{
				slidesPerView: 3,
				centeredSlides : 'true', // 슬라이드 가운데로 배치
				loop: 'true',
				pagination:{
					el: '.swiper-pagination',
					clickable: 'true',
				},
				keyboard: {
					enabled: true,
				},				
			},
		},
		on:{
			init: function(){
				var self = this;
				var checkswiper = $('.swiper.mySwiper');
				// console.log(checkswiper); 
				setTimeout(function() {
					if(checkswiper.focus() === true){
						console.log('t')
						self.autoplay.stop();
						// clone 슬라이드 remove
						// self.loop = false;
					} else {			
						console.log('f')
						self.autoplay.start();
						// clone 슬라이드 add
						// self.loop = true;
					}
				},0)
			}

		},
	});

	function controllSwiper(swiper, pauseBtn, playBtn){
		if(swiper.autoplay.running === true){
			swiper.autoplay.stop();
			$mySwiperPause.hide();
			$mySwiperPlay.show();
		} else {
			swiper.autoplay.start();
			$mySwiperPlay.hide();
			$mySwiperPause.show();
		}
	}

	$mySwiperControll.off('click').on('click', function(){
		controllSwiper(mySwiper, $mySwiperPause, $mySwiperPlay)
	});
	
	var agent = navigator.userAgent;
	agent = agent.toLowerCase();
	console.log(agent)

	if(agent.indexOf('windows') > -1){
		console.log('Iam PC');
		//'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36'
	} else if(agent.indexOf('mobile') > -1){
		console.log('Iam Mobile');
		//'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Mobile Safari/537.36'

	}
}
})
	
	
</script>
</body>
</html>